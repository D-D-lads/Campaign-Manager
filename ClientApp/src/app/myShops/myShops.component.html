<div *ngIf="!campaign">
  <h1 id="tableLabel">My Shops</h1>

  <p *ngIf="!forecasts"><em>Loading...</em></p>
  <div *ngFor="let forecast of forecasts" class="campaignList">
    <div class="card">
      <button (click)="deleteCampaign(forecast.id)" class="deleteCampaign">
        X
      </button>
      <button (click)="editCampaign(forecast.id)" class="editCampaign">
        Edit Name
      </button>
      <button class="selectCampaign" (click)="setCampaign(forecast)">
        {{ forecast.name }}
      </button>
    </div>
  </div>
  <div class="card addCampaign" (click)="postCampaignSwal()">Add Campaign</div>
</div>
<div *ngIf="campaign" class="container">
  <h1>{{ campaign.name }}</h1>
  <span class="row">
    <div class="btn-group col-6 row" role="group">
      <div class="dropdown">
        <button 
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdownMenuButton"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Cities
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div *ngFor="let city of cities" class="row">
                <button
                  class="dropdown-item col-9"
                  (click)="SelectCity(city)"
                >
                  {{ city.name }}<br />
                </button>
                <button
                  (click)="DeleteCitySwal(city.id)"
                  class="btn-danger col-3"
                >
                  X
                </button>
          </div>
        </div>
      </div>
      <button class="btn btn-dark" (click)="AddCitySwal()">+</button>
      <div *ngIf="City" class="btn-group col-6" role="group"><h2>{{City.name}}</h2>
        <div class="dropdown">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            id="dropdownMenuButton"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            Shops
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div *ngFor="let shop of shops" class="row">
                <button
                  class="dropdown-item col-9"
                  (click)="SelectShop(shop)"
                >
                  {{ shop.name }}<br />
                </button>
                <button
                  (click)="DeleteShopSwal(shop.id)"
                  class="btn-danger col-3"
                >
                  X
                </button>
            </div>
          </div>
        </div>
        <button class="btn btn-info" (click)="AddShopSwal()">+</button>
      </div>
    </div>
  </span>
  <span *ngIf="Shop">
  {{Shop.name}}
  <button
  class="btn btn-secondary dropdown-toggle"
  type="button"
  id="dropdownMenuButton"
  data-toggle="dropdown"
  aria-haspopup="true"
  aria-expanded="false"
>
  Add Item
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
  <div *ngFor="let item of items" class="row">
      <button
        class="dropdown-item col-9"
        (click)="AddItem(Shop, item)"
      >
        {{ item.name }}<br />
      </button>
  </div>
</div>
  <button class = "btn btn-primary">Add Items</button>
</span>
  <table *ngIf="Shop" class="table table-striped table-bordered table-dark">
      <thead>
        <tr>
          <th>Item Name</th>
          <th>Rarity</th>
          <th>Cost</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of Shop.items">
          <td>{{ item.name }}</td>
          <td>{{ item.rarity }}</td>
          <td>{{ item.cost }}</td>
          <td><button class='btn btn-danger' (click)= 'DeleteItem(Shop, item)'>Sell Item</button></td>
        </tr>
      </tbody>
    </table>
</div>
